CONTRACT_TYPE
{
	name = testmission03

	title = Destroy a static target
	genericTitle = Destroy a static target

	group = KUM
	agent = KUM

	description = It has recently come to our attention that we have many weapons lying around, some of which we cannot confirm are still functional, thats where you come in.
	genericDescription = You must test equipment and weaponry with a preset target.

	topic = Weapons
	subject = Experiment
	motivation = test

	synopsis = Conduct equipment tests near the target then/or destroy it.
	notes = It is recommended that you use air-to-surface or surface-to-surface ordnance to destroy the target.

	completedMessage = Success! The staff at our facility is overjoyed with the data!

	cancellable = true
	declinable = true

	targetBody = HomeWorld()

	maxCompletions = 0
	maxSimultaneous = 1

	// Requirement node for contract prerequisites

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = required
	}

	// Data node for expressions, data storage etc

	DATA
	{
		type = double

		science = Random(2.0, 6.0)
		reputation = Random(4.0, 10.0)
		funds = Random(8000.0, 16000.0)
	}

	rewardScience = 0
	rewardReputation = @/reputation / 2
	rewardFunds = @/funds / 2
	failureReputation = @/reputation / 4
	failureFunds = @/funds / 8
	advanceFunds = @/funds / 4

	// Behaviour such as vessel location, name etc

	BEHAVIOUR
	{
		name = SpawnVessel
		type = SpawnVessel
		deferVesselCreation = true

		VESSEL
		{
			name = TargetStatic
			craftURL = ContractPacks/KUM/ships/target_static.craft
			flagURL = Squad/Flags/retro
			vesselType = Unknown
			owned = false
			targetBody = HomeWorld()

			lat = Random(-0.35361111, -0.08194444)
			lon = Random(-75.02166667, -77.50361111)
			alt = 1

			heading = Random(0.0, 360.0)
			pitch = 90.0
		}
	}

	BEHAVIOUR
	{
		name = DestroyVessel
		type = DestroyVessel

		onState = CONTRACT_COMPLETED

		vessel = TargetStatic
	}

	// Parameter node for contract completion

	PARAMETER
	{
		name = Sequence1
		type = Sequence

		failWhenCompleteOutOfOrder = true

		title = Destroy the static target

		PARAMETER
		{
			name = TargetDestroyed
			type = TargetDestroyed

			vessel = TargetStatic

			title = Destroy the target
		}

		PARAMETER
		{
			name = RecoverVessel
			type = RecoverVessel

			title = Land and/or recover the testbed vehicle safely
			completedMessage = The testbed was successfully recovered!

			rewardScience = 0.0
			rewardReputation = @/reputation / 3
			rewardFunds = @/funds / 12
			failureReputation = 0.0
			failureFunds = 0.0
		}
	}

	PARAMETER
	{
		name = Sequence2
		type = Sequence

		hiddenParameter = TargetRendezvousDuration
		failWhenCompleteOutOfOrder = false

		optional = true

		title = Run equipment tests

		PARAMETER
		{
			name = TargetRendezvous
			type = Rendezvous

			vessel = TargetStatic

			distance = 1000.0

			disableOnStateChange = true

			title = Approach the target within 1 km of distance
		}

		PARAMETER
		{
			name = TargetRendezvousDuration
			type = Duration

			duration = 10s

			preWaitText = Rendezvous for equipment testing
			waitingText = Testing equipment...
			completionText = Equipment testing

			startCriteria = PARAMETER_COMPLETION
			parameter = TargetRendezvous

			rewardScience = @/science
			rewardReputation = @/reputation
			rewardFunds = (@/funds / 2) * 1.5
			failureReputation = 0.0
			failureFunds = 0.0
		}
	}
}
